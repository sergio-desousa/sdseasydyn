#!/usr/bin/env perl
use strict;
use warnings;

use Getopt::Long qw(:config bundling no_ignore_case);
use EasyDNS::DDNS;

my $help    = 0;
my $version = 0;

GetOptions(
    'help|h'    => \$help,
    'version|V' => \$version,
) or _usage(2);

if ($version) {
    print "sdseasydyn 0.001\n";
    exit 0;
}

if ($help || !@ARGV) {
    _usage(0);
}

my $cmd = shift @ARGV;
if ($cmd eq 'update') {
    print "Not implemented yet (scaffold step).\n";
    exit 2;
}

print STDERR "Unknown command: $cmd\n";
_usage(2);

sub _usage {
    my ($code) = @_;
    print <<"USAGE";
sdseasydyn - EasyDNS Dynamic DNS updater

Usage:
  sdseasydyn update [options]
  sdseasydyn --help
  sdseasydyn --version

Commands:
  update   Update one or more hostnames (to be implemented)

Exit codes:
  0 success
  2 usage/config error
USAGE
    exit $code;
}

